<div class="explicacio esquema-modular">
	<style>
	.schema-frame {
		background: #fbfcff;
		padding: 24px;
		border-radius: 14px;
		margin-bottom: 24px;
		border: 1px solid #e7ebf2;
		box-shadow: 0 10px 24px rgba(15, 23, 42, 0.06);
		transition: all 0.2s ease;
	}

	.schema-frame:hover {
		transform: translateY(-1px);
		box-shadow: 0 14px 28px rgba(15, 23, 42, 0.09);
	}

	.schema-toggle {
		cursor: pointer;
		font-weight: 600;
		margin-top: 12px;
		color: #1e4bd1;
		transition: all 0.2s ease;
	}

	.schema-toggle:hover {
		color: #163ea8;
	}

	.schema-content {
		display: none;
		margin-top: 10px;
		padding: 14px;
		background: #ffffff;
		border-left: 3px solid #1e4bd1;
		border-radius: 8px;
	}

	.esquema-modular h2 {
		margin: 34px 0 16px;
	}

	.esquema-modular h3 {
		margin: 0 0 2px;
	}

	.esquema-modular h1 {
		margin: 0 0 20px;
	}
	</style>

	<h2>I. TEORIA GENERAL DEL SISTEMA DE FONTS</h2>
	<div class="schema-frame">
		<h3>1. Concepte de font del dret</h3>
		<div class="schema-toggle" onclick="toggleSection('p1-preguntes')">&gt; Preguntes</div>
		<div id="p1-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p1-diagrama')">&gt; Diagrama</div>
		<div id="p1-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p1-explicacio')">&gt; Explicació</div>
		<div id="p1-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>2. Fonts formals vs materials</h3>
		<div class="schema-toggle" onclick="toggleSection('p2-preguntes')">&gt; Preguntes</div>
		<div id="p2-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p2-diagrama')">&gt; Diagrama</div>
		<div id="p2-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p2-explicacio')">&gt; Explicació</div>
		<div id="p2-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>3. Sistema de fonts en l’Estat de dret</h3>
		<div class="schema-toggle" onclick="toggleSection('p3-preguntes')">&gt; Preguntes</div>
		<div id="p3-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p3-diagrama')">&gt; Diagrama</div>
		<div id="p3-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p3-explicacio')">&gt; Explicació</div>
		<div id="p3-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>4. Principis estructurals (legalitat, jerarquia normativa, competència, seguretat jurídica, interdicció arbitrarietat)</h3>
		<div class="schema-toggle" onclick="toggleSection('p4-preguntes')">&gt; Preguntes</div>
		<div id="p4-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p4-diagrama')">&gt; Diagrama</div>
		<div id="p4-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p4-explicacio')">&gt; Explicació</div>
		<div id="p4-explicacio" class="schema-content">En construcció</div>
	</div>

	<h2>II. ESTRUCTURA NORMATIVA</h2>
	<div class="schema-frame">
		<h3>5. Constitució com a norma suprema</h3>
		<div class="schema-toggle" onclick="toggleSection('p5-preguntes')">&gt; Preguntes</div>
		<div id="p5-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p5-diagrama')">&gt; Diagrama</div>
		<div id="p5-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p5-explicacio')">&gt; Explicació</div>
		<div id="p5-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>6. Bloc de constitucionalitat</h3>
		<div class="schema-toggle" onclick="toggleSection('p6-preguntes')">&gt; Preguntes</div>
		<div id="p6-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p6-diagrama')">&gt; Diagrama</div>
		<div id="p6-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p6-explicacio')">&gt; Explicació</div>
		<div id="p6-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>7. La llei com a font</h3>
		<div class="schema-toggle" onclick="toggleSection('p7-preguntes')">&gt; Preguntes</div>
		<div id="p7-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p7-diagrama')">&gt; Diagrama</div>
		<div id="p7-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p7-explicacio')">&gt; Explicació</div>
		<div id="p7-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>8. Normes amb rang de llei (decret llei i decret legislatiu)</h3>
		<div class="schema-toggle" onclick="toggleSection('p8-preguntes')">&gt; Preguntes</div>
		<div id="p8-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p8-diagrama')">&gt; Diagrama</div>
		<div id="p8-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p8-explicacio')">&gt; Explicació</div>
		<div id="p8-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>9. Reserva de llei</h3>
		<div class="schema-toggle" onclick="toggleSection('p9-preguntes')">&gt; Preguntes</div>
		<div id="p9-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p9-diagrama')">&gt; Diagrama</div>
		<div id="p9-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p9-explicacio')">&gt; Explicació</div>
		<div id="p9-explicacio" class="schema-content">En construcció</div>
	</div>

	<h2>III. POTESTAT REGLAMENTÀRIA</h2>
	<div class="schema-frame">
		<h3>10. Concepte de reglament</h3>
		<div class="schema-toggle" onclick="toggleSection('p10-preguntes')">&gt; Preguntes</div>
		<div id="p10-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p10-diagrama')">&gt; Diagrama</div>
		<div id="p10-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p10-explicacio')">&gt; Explicació</div>
		<div id="p10-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>11. Fonament constitucional de la potestat reglamentària</h3>
		<div class="schema-toggle" onclick="toggleSection('p11-preguntes')">&gt; Preguntes</div>
		<div id="p11-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p11-diagrama')">&gt; Diagrama</div>
		<div id="p11-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p11-explicacio')">&gt; Explicació</div>
		<div id="p11-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>12. Classes de reglaments</h3>
		<div class="schema-toggle" onclick="toggleSection('p12-preguntes')">&gt; Preguntes</div>
		<div id="p12-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p12-diagrama')">&gt; Diagrama</div>
		<div id="p12-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p12-explicacio')">&gt; Explicació</div>
		<div id="p12-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>13. Límits del reglament</h3>
		<div class="schema-toggle" onclick="toggleSection('p13-preguntes')">&gt; Preguntes</div>
		<div id="p13-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p13-diagrama')">&gt; Diagrama</div>
		<div id="p13-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p13-explicacio')">&gt; Explicació</div>
		<div id="p13-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>14. Control jurisdiccional dels reglaments</h3>
		<div class="schema-toggle" onclick="toggleSection('p14-preguntes')">&gt; Preguntes</div>
		<div id="p14-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p14-diagrama')">&gt; Diagrama</div>
		<div id="p14-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p14-explicacio')">&gt; Explicació</div>
		<div id="p14-explicacio" class="schema-content">En construcció</div>
	</div>

	<h2>IV. DRET DE LA UNIÓ EUROPEA</h2>
	<div class="schema-frame">
		<h3>15. Principi de primacia</h3>
		<div class="schema-toggle" onclick="toggleSection('p15-preguntes')">&gt; Preguntes</div>
		<div id="p15-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p15-diagrama')">&gt; Diagrama</div>
		<div id="p15-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p15-explicacio')">&gt; Explicació</div>
		<div id="p15-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>16. Efecte directe</h3>
		<div class="schema-toggle" onclick="toggleSection('p16-preguntes')">&gt; Preguntes</div>
		<div id="p16-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p16-diagrama')">&gt; Diagrama</div>
		<div id="p16-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p16-explicacio')">&gt; Explicació</div>
		<div id="p16-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>17. Tipologia de normes UE</h3>
		<div class="schema-toggle" onclick="toggleSection('p17-preguntes')">&gt; Preguntes</div>
		<div id="p17-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p17-diagrama')">&gt; Diagrama</div>
		<div id="p17-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p17-explicacio')">&gt; Explicació</div>
		<div id="p17-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>18. Incidència del dret UE en l’ordenament administratiu</h3>
		<div class="schema-toggle" onclick="toggleSection('p18-preguntes')">&gt; Preguntes</div>
		<div id="p18-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p18-diagrama')">&gt; Diagrama</div>
		<div id="p18-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p18-explicacio')">&gt; Explicació</div>
		<div id="p18-explicacio" class="schema-content">En construcció</div>
	</div>

	<h2>V. FONTS SUPLETÒRIES</h2>
	<div class="schema-frame">
		<h3>19. Costum</h3>
		<div class="schema-toggle" onclick="toggleSection('p19-preguntes')">&gt; Preguntes</div>
		<div id="p19-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p19-diagrama')">&gt; Diagrama</div>
		<div id="p19-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p19-explicacio')">&gt; Explicació</div>
		<div id="p19-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>20. Principis generals del dret</h3>
		<div class="schema-toggle" onclick="toggleSection('p20-preguntes')">&gt; Preguntes</div>
		<div id="p20-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p20-diagrama')">&gt; Diagrama</div>
		<div id="p20-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p20-explicacio')">&gt; Explicació</div>
		<div id="p20-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>21. Equitat</h3>
		<div class="schema-toggle" onclick="toggleSection('p21-preguntes')">&gt; Preguntes</div>
		<div id="p21-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p21-diagrama')">&gt; Diagrama</div>
		<div id="p21-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p21-explicacio')">&gt; Explicació</div>
		<div id="p21-explicacio" class="schema-content">En construcció</div>
	</div>

	<h2>VI. JURISPRUDÈNCIA</h2>
	<div class="schema-frame">
		<h3>22. Jurisprudència com a criteri interpretatiu</h3>
		<div class="schema-toggle" onclick="toggleSection('p22-preguntes')">&gt; Preguntes</div>
		<div id="p22-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p22-diagrama')">&gt; Diagrama</div>
		<div id="p22-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p22-explicacio')">&gt; Explicació</div>
		<div id="p22-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>23. Funció del Tribunal Suprem</h3>
		<div class="schema-toggle" onclick="toggleSection('p23-preguntes')">&gt; Preguntes</div>
		<div id="p23-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p23-diagrama')">&gt; Diagrama</div>
		<div id="p23-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p23-explicacio')">&gt; Explicació</div>
		<div id="p23-explicacio" class="schema-content">En construcció</div>
	</div>
	<div class="schema-frame">
		<h3>24. Funció del Tribunal Constitucional</h3>
		<div class="schema-toggle" onclick="toggleSection('p24-preguntes')">&gt; Preguntes</div>
		<div id="p24-preguntes" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p24-diagrama')">&gt; Diagrama</div>
		<div id="p24-diagrama" class="schema-content">En construcció</div>
		<div class="schema-toggle" onclick="toggleSection('p24-explicacio')">&gt; Explicació</div>
		<div id="p24-explicacio" class="schema-content">En construcció</div>
	</div>

	<script>
	function toggleSection(id) {
		const el = document.getElementById(id);
		if (!el) return;
		if (el.style.display === "block") {
			el.style.display = "none";
		} else {
			el.style.display = "block";
		}
	}

	(function initEsquemesPointAccordion() {
		const styleId = 'esquema-point-accordion-style';
		if (!document.getElementById(styleId)) {
			const style = document.createElement('style');
			style.id = styleId;
			style.textContent = `
			.point-toggle {
				width: 100%;
				display: flex;
				align-items: center;
				gap: 10px;
				margin: 0;
				padding: 0;
				background: transparent;
				border: 0;
				cursor: pointer;
				text-align: left;
			}
			.point-arrow {
				color: #1e4bd1;
				font-size: 0.92rem;
				transition: transform 0.2s ease;
			}
			.point-toggle.open .point-arrow {
				transform: rotate(90deg);
			}
			.point-title {
				font-size: 1.02rem;
				font-weight: 700;
				color: #0f172a;
				line-height: 1.35;
			}
			.point-content {
				display: none;
				margin-top: 10px;
			}
			`;
			document.head.appendChild(style);
		}

		const frames = document.querySelectorAll('.esquema-modular .frame, .esquema-modular .schema-frame');
		frames.forEach((frame) => {
			if (frame.dataset.pointAccordion === 'true') return;

			const title = frame.querySelector('h3');
			if (!title) return;

			const button = document.createElement('button');
			button.type = 'button';
			button.className = 'point-toggle';
			button.setAttribute('aria-expanded', 'false');
			button.innerHTML = `<span class="point-arrow">▸</span><span class="point-title">${title.textContent}</span>`;

			title.replaceWith(button);

			const body = document.createElement('div');
			body.className = 'point-content';
			while (button.nextSibling) {
				body.appendChild(button.nextSibling);
			}
			frame.appendChild(body);

			button.addEventListener('click', () => {
				const isOpen = button.classList.contains('open');

				document.querySelectorAll('.esquema-modular .point-toggle.open').forEach((opened) => {
					if (opened !== button) {
						opened.classList.remove('open');
						opened.setAttribute('aria-expanded', 'false');
						const openedBody = opened.parentElement.querySelector('.point-content');
						if (openedBody) openedBody.style.display = 'none';
					}
				});

				if (isOpen) {
					button.classList.remove('open');
					button.setAttribute('aria-expanded', 'false');
					body.style.display = 'none';
				} else {
					button.classList.add('open');
					button.setAttribute('aria-expanded', 'true');
					body.style.display = 'block';
				}
			});

			frame.dataset.pointAccordion = 'true';
		});
	})();
	</script>
</div>
